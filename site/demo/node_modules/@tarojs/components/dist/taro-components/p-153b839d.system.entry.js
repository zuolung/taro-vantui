System.register(["./p-cf496b3b.system.js","./p-bd00f506.system.js"],(function(e){"use strict";var t,a,r,o,n,i;return{setters:[function(e){t=e.h;a=e.r;r=e.c;o=e.H;n=e.g},function(e){i=e.c}],execute:function(){function s(e){return e.charAt(0)==="/"}function l(e,t){for(var a=t,r=a+1,o=e.length;r<o;a+=1,r+=1){e[a]=e[r]}e.pop()}function b(e,t){if(t===undefined)t="";var a=e&&e.split("/")||[];var r=t&&t.split("/")||[];var o=e&&s(e);var n=t&&s(t);var i=o||n;if(e&&s(e)){r=a}else if(a.length){r.pop();r=r.concat(a)}if(!r.length)return"/";var b;if(r.length){var d=r[r.length-1];b=d==="."||d===".."||d===""}else{b=false}var h=0;for(var f=r.length;f>=0;f--){var u=r[f];if(u==="."){l(r,f)}else if(u===".."){l(r,f);h++}else if(h){l(r,f);h--}}if(!i)for(;h--;h)r.unshift("..");if(i&&r[0]!==""&&(!r[0]||!s(r[0])))r.unshift("");var c=r.join("/");if(b&&c.substr(-1)!=="/")c+="/";return c}var d=function(e){var t=e||"";var a;var r={path:null,query:null,fragment:null};a=t.indexOf("#");if(a>-1){r.fragment=t.substring(a+1);t=t.substring(0,a)}a=t.indexOf("?");if(a>-1){r.query=t.substring(a+1);t=t.substring(0,a)}r.path=t;return r};var h=function(e){var a=e.index,r=e.isSelected,o=r===void 0?false:r,n=e.textColor,s=e.iconPath,l=e.badgeText,b=e.showRedDot,d=b===void 0?false:b,h=e.text,f=e.onSelect;var u=i("weui-tabbar__item",{"weui-bar__item_on":o});var c={position:"absolute",top:"-2px",right:"-13px"};var v={position:"absolute",top:"0",right:"-6px"};function g(){f(a)}return t("a",{key:a,href:"javascript:;",class:u,onClick:g},t("span",{style:{display:"inline-block",position:"relative"}},t("img",{src:s,alt:"",class:"weui-tabbar__icon"}),!!l&&t("span",{class:"weui-badge taro-tabbar-badge",style:c},l),d&&t("span",{class:"weui-badge weui-badge_dot",style:v})),t("p",{class:"weui-tabbar__label",style:{color:n}},h))};var f="html,body{height:100%}#app{height:100%}.taro-tabbar__border-white::before{border-top-color:#fff !important}.taro-tabbar__container{display:-ms-flexbox;display:flex;height:100%;-ms-flex-direction:column;flex-direction:column;overflow:hidden}.taro-tabbar__panel{-ms-flex:1;flex:1;position:relative;overflow:auto;-webkit-overflow-scrolling:touch}.taro-tabbar__tabbar{position:relative;height:50px;width:100%;-webkit-transition:bottom 0.2s, top 0.2s;transition:bottom 0.2s, top 0.2s}.taro-tabbar__tabbar-top{top:0}.taro-tabbar__tabbar-bottom{bottom:0}.taro-tabbar__tabbar-hide{display:none}.taro-tabbar__tabbar-slideout{top:-52px;-ms-flex:0 0;flex:0 0}.taro-tabbar__panel+.taro-tabbar__tabbar-slideout{top:auto;bottom:-52px}";var u=require("@tarojs/taro");var c=function(e){return e[0]==="/"?e:"/"+e};var v=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)};var g=function(e,t){return v(e,t)?e.substr(t.length):e};var p=0;var _=1;var T=2;var m="taro-tabbar__tabbar";var B="taro-tabbar__tabbar-hide";var w="taro-tabbar__tabbar-slideout";var x=e("taro_tabbar",function(){function e(e){var t=this;a(this,e);this.onLongPress=r(this,"longpress",7);this.homePage="";this.customRoutes=[];this.tabbarPos="bottom";this.selectedIndex=-1;this.status=p;this.getOriginUrl=function(e){var a=t.customRoutes.filter((function(t){var a=t[1];var r=d(a).path;var o=d(e).path;return r===o}));return a.length?a[0][0]:e};this.getSelectedIndex=function(e){var a=-1;t.list.forEach((function(t,r){var o=t.pagePath;var n=d(e).path;var i=d(o).path;if(n===i){a=r}}));return a};this.switchTab=function(e){t.selectedIndex=e;u.navigateTo({url:t.list[e].pagePath})};this.switchTabHandler=function(e){var a=e.url,r=e.successHandler,o=e.errorHandler;var n=t.getOriginUrl(t.getCurrentUrl()||t.homePage);var i=b(a,n);var s=t.getSelectedIndex(i);if(s>-1){t.switchTab(s);r({errMsg:"switchTab:ok"})}else{o({errMsg:'switchTab:fail page "'+i+'" is not found'})}};this.routerChangeHandler=function(e){var a;var r;if(e){a=e.toLocation}if(a&&a.path){var o=c(a.path);r=o==="/"?t.homePage:o}else{r=t.getCurrentUrl()}t.selectedIndex=t.getSelectedIndex(t.getOriginUrl(r))};this.setTabBarBadgeHandler=function(e){var a=e.index,r=e.text,o=e.errorHandler;var n=t.list;if(a in n){t.list[a].showRedDot=false;t.list[a].badgeText=r}else{o({errMsg:"setTabBarBadge:fail tabbar item not found"})}};this.removeTabBarBadgeHandler=function(e){var a=e.index,r=e.successHandler,o=e.errorHandler;var n=t.list;if(a in n){t.list[a].badgeText=null;t.list[a].badgeText=null;r({errMsg:"removeTabBarBadge:ok"})}else{o({errMsg:"removeTabBarBadge:fail tabbar item not found"})}};this.showTabBarRedDotHandler=function(e){var a=e.index,r=e.successHandler,o=e.errorHandler;var n=t.list;if(a in n){n[a].badgeText=null;n[a].showRedDot=true;r({errMsg:"showTabBarRedDot:ok"})}else{o({errMsg:"showTabBarRedDot:fail tabbar item not found"})}};this.hideTabBarRedDotHandler=function(e){var a=e.index,r=e.successHandler,o=e.errorHandler;var n=t.list;if(a in n){n[a].showRedDot=false;r({errMsg:"hideTabBarRedDot:ok"})}else{o({errMsg:"hideTabBarRedDot:fail tabbar item not found"})}};this.showTabBarHandler=function(e){var a=e.successHandler;t.status=p;a({errMsg:"showTabBar:ok"})};this.hideTabBarHandler=function(e){var a=e.animation,r=e.successHandler;t.status=a?T:_;r({errMsg:"hideTabBar:ok"})};var o=this.conf.list;var n=this.conf.customRoutes;if(Object.prototype.toString.call(o)!=="[object Array]"||o.length<2||o.length>5){throw new Error("tabBar 配置错误")}this.homePage=c(this.conf.homePage);for(var i in n){this.customRoutes.push([i,n[i]])}o.forEach((function(e){if(e.pagePath.indexOf("/")!==0){e.pagePath="/"+e.pagePath}}));this.list=o}e.prototype.getCurrentUrl=function(){var e=this.conf.mode;var t=this.conf.basename||"/";var a;if(e==="hash"){var r=window.location.href;var o=r.indexOf("#");a=o===-1?"":r.substring(o+1)}else{a=location.pathname}var n=c(g(a,t));return n==="/"?this.homePage:n};e.prototype.bindEvent=function(){u.eventCenter.on("__taroRouterChange",this.routerChangeHandler);u.eventCenter.on("__taroSwitchTab",this.switchTabHandler);u.eventCenter.on("__taroSetTabBarBadge",this.setTabBarBadgeHandler);u.eventCenter.on("__taroRemoveTabBarBadge",this.removeTabBarBadgeHandler);u.eventCenter.on("__taroShowTabBarRedDotHandler",this.showTabBarRedDotHandler);u.eventCenter.on("__taroHideTabBarRedDotHandler",this.hideTabBarRedDotHandler);u.eventCenter.on("__taroShowTabBar",this.showTabBarHandler);u.eventCenter.on("__taroHideTabBar",this.hideTabBarHandler)};e.prototype.removeEvent=function(){u.eventCenter.off("__taroRouterChange",this.routerChangeHandler);u.eventCenter.off("__taroSwitchTab",this.switchTabHandler);u.eventCenter.off("__taroSetTabBarBadge",this.setTabBarBadgeHandler);u.eventCenter.off("__taroRemoveTabBarBadge",this.removeTabBarBadgeHandler);u.eventCenter.off("__taroShowTabBarRedDotHandler",this.showTabBarRedDotHandler);u.eventCenter.off("__taroHideTabBarRedDotHandler",this.hideTabBarRedDotHandler);u.eventCenter.off("__taroShowTabBar",this.showTabBarHandler);u.eventCenter.off("__taroHideTabBar",this.hideTabBarHandler)};e.prototype.componentDidLoad=function(){this.tabbarPos=this.tabbar.nextElementSibling?"top":"bottom";this.bindEvent();this.routerChangeHandler()};e.prototype.disconnectedCallback=function(){this.removeEvent()};e.prototype.render=function(){var e,a;var r=this;var n=this,s=n.conf,l=n.tabbarPos,b=l===void 0?"bottom":l;var d=this.status;var f=i("weui-tabbar",(e={},e["taro-tabbar__border-"+(s.borderStyle||"black")]=true,e));var u=this.selectedIndex===-1||d===_;var c=d===T;return t(o,{class:i(m,m+"-"+b,(a={},a[B]=u,a[w]=c,a))},t("div",{class:f,style:{backgroundColor:s.backgroundColor||""}},this.list.map((function(e,a){var o=r.selectedIndex===a;var n;var i;if(o){n=s.selectedColor;i=e.selectedIconPath}else{n=s.color||"";i=e.iconPath}return t(h,{index:a,onSelect:r.switchTab.bind(r),isSelected:o,textColor:n,iconPath:i,text:e.text,badgeText:e.badgeText,showRedDot:e.showRedDot})}))))};Object.defineProperty(e.prototype,"tabbar",{get:function(){return n(this)},enumerable:false,configurable:true});return e}());x.style=f}}}));